#!/data/data/com.termux/files/usr/bin/bash

#  Colors
RED='\033[1;31m'
GREEN='\033[1;32m'
YELLOW='\033[1;33m'
CYAN='\033[1;36m'
BLUE='\033[1;34m'
RESET='\033[0m'

#  Database Path
DB_PATH="/server/maindb.json"

clear
echo -e "${BLUE} zerodark Admin Password Changer${RESET}"
echo -e "${CYAN}${RESET}"

# 锔 Input Username
echo -ne "${YELLOW}锔 Enter new username: ${RESET}"
read new_username

#  Input Password (show while typing)
echo -ne "${YELLOW} Enter new password: ${RESET}"
read new_password

#  Convert to MD5
hashed_password=$(echo -n "$new_password" | md5sum | awk '{print $1}')

# Check if DB exists
if [ ! -f "$DB_PATH" ]; then
  echo -e "${RED}17 Error: maindb.json not found at $DB_PATH${RESET}"
  exit 1
fi

# 锔17 Update JSON
tmpfile=$(mktemp)
jq --arg user "$new_username" --arg pass "$hashed_password" \
'.admin.username = $user | .admin.password = $pass' \
"$DB_PATH" > "$tmpfile" && mv "$tmpfile" "$DB_PATH"

# 17 Success Output
echo -e "\n${GREEN}17 Username & Password updated!${RESET}"
echo -e "${CYAN} Username: ${new_username}${RESET}"
echo -e "${CYAN} Password: ${new_password}${RESET}"

#  YouTube Link
echo -e "\n${RED} Subscribe:${GREEN} https://youtube.com ${RESET}"
echo -e "${CYAN}${RESET}"
zerodark